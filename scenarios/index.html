<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Db2 Shift Scenarios - Click to Containerize</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Db2 Shift Scenarios";
    var mkdocs_page_input_path = "scenarios.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Click to Containerize</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../prerequisites/">Pre-Requisites</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Command Line</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../syntax/">Db2 Shift Syntax</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../reference/">Options Reference</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Command Line Scenarios</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Db2 Shift Scenarios</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#db2-shift-command">Db2 Shift Command</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#db2-containerization-to-openshift-kubernetes-or-cp4d">Db2 Containerization to OpenShift, Kubernetes, or CP4D</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#db2-shift-to-another-db2-instance">Db2 Shift to another Db2 Instance</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#clone-an-existing-database">Clone an Existing Database</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#clone-deployment-to-openshift-kubernetes-or-cp4d">Clone Deployment to OpenShift, Kubernetes, or CP4D</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#clone-deployment-to-another-db2-instance">Clone Deployment to Another Db2 Instance</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#initialize-hadr-between-source-and-target-pod">Initialize HADR between Source and Target POD</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#initialize-hadr-between-source-and-target-instance">Initialize HADR between Source and Target Instance</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#initialize-dmc-and-ldap-authentication-for-cp4d">Initialize DMC and LDAP Authentication for CP4D</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#clone-copy">Clone Copy</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../shiftpod/">Db2 Shift to Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../shiftinstance/">Db2 Shift to Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../clone/">Clone a Database</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deploypod/">Deploy a Clone to a Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deployinstance/">Deploy a Clone to an Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../hadrpod/">HADR Setup Instance to Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../hadrinstance/">HADR Setup Instance to Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ldapdmc/">LDAP and DMC Initialization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../clonecopy/">Clone Copying</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">User Interface Scenarios</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../gui/">User Interface Overvew</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guishifttopod/">UI Shift to POD</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guishifttoinstance/">UI Shift to Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guiclone/">UI Clone a Database</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guideploytopod/">UI Deploy a Clone to a Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guideploytoinstance/">UI Deploy a Clone to an Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guihadrpod/">UI HADR Setup Instance to Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guihadrinstance/">UI HADR Setup Instance to Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guildapdmc/">UI LDAP and DMC Initialization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guiclonecopy/">UI Clone Copying</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Reference</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../reference/">Options Reference</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../support/">Support</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../disclaimer/">Disclaimer</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Click to Containerize</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Command Line Scenarios &raquo;</li>
        
      
    
    <li>Db2 Shift Scenarios</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="shift-scenarios">Shift Scenarios</h1>
<p>There are 8 scenarios covered in this section. Each scenario represents a typical use of the Db2 Shift program.
The scenarios can be summarized as:</p>
<ul>
<li>Shift a Db2 database to OpenShift, Kubernetes or CP4D</li>
<li>Shift a Db2 database to another Db2 instance</li>
<li>Create a Cloned copy of the Db2 database for later deployment</li>
<li>Deploy a clone into an OpenShift, Kubernetes or CP4D container</li>
<li>Deploy a clone into another Db2 instance</li>
<li>Initialize HADR between Source and Target POD </li>
<li>Initialize HADR between Source and Target Instance</li>
<li>Initialize DMC and LDAP Authentication for CP4D</li>
<li>Copy Cloned Databases to a POD</li>
</ul>
<p>All scenarios assume that you are currently connected to the instance
that has the Db2 database and have authenticated to OpenShift or Kubernetes
before issuing the command. </p>
<h2 id="db2-shift-command">Db2 Shift Command</h2>
<p>To invoke the Db2 shift command use the format <code>./db2shift</code> if the program is installed in a local
directory. If it is stored in the <code>/bin</code> directory then you can refer to it without the 
directory prefix <code>db2shift</code>. </p>
<p>The program has three modes of operations:</p>
<ul>
<li>
<p>If the program is started without any parameters, it will go into full screen display mode and
prompt you for the action you wish to take. You can use this prompt mode to generate any 
Db2 Shift command. 
</p></p>
</li>
<li>
<p>If the <code>--help</code> option is used, the program will display a menu of help topics on the use
of the Db2 Shift program.
</p></p>
</li>
<li>
<p>Otherwise, the Db2 Shift program will attempt to run the shift based on the settings provided.</p>
</li>
</ul>
<h2 id="db2-containerization-to-openshift-kubernetes-or-cp4d">Db2 Containerization to OpenShift, Kubernetes, or CP4D</h2>
<p>Containerizing an existing Db2 database on an on-premise system to OpenShift, Kubernetes, or CP4D 
is the most common scenario for using Db2 Shift. In order to move a Db2 database to a POD you 
will require the following information:</p>
<ul>
<li>Source Database details</li>
<li>Destination location</li>
<li>Type of Containerization environment</li>
<li>Shift Options</li>
</ul>
<p>The target of the Db2 Shift operation can be OpenShift, a Kubernetes cluster, or Cloud Pak for Data. </p>
<p>The syntax for running a direct shift from a Db2 database to a POD is:</p>
<pre><code class="language-bash">db2shift

    Required Options

    --mode=[move | all]    
    --dest-type=POD
    --oc or --kubectl
    --source-dbname=flights
    --source-owner=db2inst1
    --dest-dbname=db2oltp
    --dest-server=c-demo-db2u-0

    Optional Settings

    --dest-namespace=db2u
    --hadr
    --online or --offline
    --threads=4
    --compress-level=4
    --exclude-functions
    --sync=[start_sync, rerun_sync, finish_sync]
    --blank-slate=[true|false] --gen-settings
    --verify
</code></pre>

<p>More details can be found in the <a href="../shiftpod/">Db2 Containerization to OpenShift, Kubernetes, or CP4D</a> section.</p>
<h2 id="db2-shift-to-another-db2-instance">Db2 Shift to another Db2 Instance</h2>
<p>This format of the Db2 Shift will take an existing Db2 database on an on-premise system,
and shift it to another traditional Db2 system hosted on another on-premise
server or cloud virtual machine. This does not containerize Db2! The Db2 Shift command 
requires the following information:</p>
<ul>
<li>Source Database details</li>
<li>Destination location</li>
<li>Shift Options</li>
</ul>
<p>The db2shift program assumes that you are currently connected to the instance
that has the Db2 database and have ssh connectivity to the target server.</p>
<p>The syntax for running a direct shift from a Db2 database to a POD is:</p>
<pre><code class="language-bash">db2shift

    Required Options

    --mode=move    
    --ssh
    --dest-type=OTHER
    --source-dbname=flights
    --source-owner=db2inst1
    --dest-dbname=db2oltp
    --dest-server=db2inst1@some.server.com \ 

    Optional Settings

    --hadr
    --online or --offline
    --threads=4
    --compress-level=4
    --exclude-functions
    --sync=[start_sync, rerun_sync, finish_sync]
    --blank-slate=[true|false] --gen-settings
    --verify
</code></pre>

<p>More details can be found in the <a href="../shiftinstance/">Db2 Shift to another Db2 Instance</a> section.</p>
<h2 id="clone-an-existing-database">Clone an Existing Database</h2>
<p>The Db2 Shift clone option is used to take an existing Db2 database that is currently
on-premise, and clone it into a directory. This cloned database can then
be transported to another server and be deployed at that location.</p>
<p>The advantage of cloning is that the destination does not need to be 
connected to the source location and the deployment of the clone can
be done at a more convenient time.</p>
<p>The Db2 Shift program requires the following information:</p>
<ul>
<li>Source Database details</li>
<li>Clone Options</li>
</ul>
<p>The destination details are not required to clone a database.</p>
<p>The syntax for creating a cloned database is:</p>
<pre><code class="language-bash">db2shift

    Required Options

    --mode=clone   
    --source-dbname=flights
    --source-owner=db2inst1
    --clone-dir=/tmp/cache

    Optional Settings

    --online or --offline
    --threads=4
    --exclude-functions
    --sync=[start_sync, rerun_sync, finish_sync]
    --blank-slate=[true|false] --gen-settings
    --verify
</code></pre>

<p>More details can be found in the <a href="../clone/">Clone an Existing Database</a> section.</p>
<h2 id="clone-deployment-to-openshift-kubernetes-or-cp4d">Clone Deployment to OpenShift, Kubernetes, or CP4D</h2>
<p>This Db2 Shift option will take a database clone and deploy it into a Db2u pod running on 
OpenShift, Kubernetes or CP4D.</p>
<p>The panel requires the following information:</p>
<ul>
<li>Database name and clone location</li>
<li>Destination POD details</li>
<li>Type of Containerization environment</li>
<li>Shift Options</li>
</ul>
<p>The syntax for deploying a clone to a POD is:</p>
<pre><code class="language-bash">db2shift

    Required Options

    --mode=apply_clone    
    --dest-type=POD
    --oc or --kubectl or --local
    --source-dbname=flights
    --source-owner=db2inst1
    --clone-dir=/tmp/cache
    --dest-dbname=db2oltp
    --dest-server=c-demo-db2u-0

    Optional Settings

    --dest-namespace=db2u
    --hadr
    --online or --offline
    --threads=4
    --compress-level=4
    --exclude-functions
    --sync=[start_sync, rerun_sync, finish_sync]
    --blank-slate=[true|false] --gen-settings
    --verify
</code></pre>

<p>More details can be found in the <a href="../deploypod/">Clone Deployment to OpenShift, Kubernetes, or CP4D</a> section.</p>
<h2 id="clone-deployment-to-another-db2-instance">Clone Deployment to Another Db2 Instance</h2>
<p>This Db2 Shift option will take a database clone and deploy it into another 
Db2 instance running natively (in any environment including Cloud VMs).</p>
<p>The panel requires the following information:</p>
<ul>
<li>Database name and clone location</li>
<li>Destination instance details</li>
<li>Shift Options</li>
</ul>
<p>The syntax for deploying a clone to another Db2 INSTANCE is:</p>
<pre><code class="language-bash">db2shift

    Required Options

    --mode=apply_clone    
    --dest-type=OTHER
    --ssh or --local
    --source-dbname=flights
    --source-owner=db2inst1
    --clone-dir=/tmp/cache
    --dest-dbname=db2oltp
    --dest-owner=db2inst1                                            
    --dest-server=db2inst1@some.server.com

    Optional Settings

    --hadr
    --online or --offline
    --threads=4
    --compress-level=4
    --exclude-functions
    --sync=[start_sync, rerun_sync, finish_sync]
    --blank-slate=[true|false] --gen-settings
    --verify
</code></pre>

<p>More details can be found in the <a href="../deployinstance/">Clone Deployment to Another Db2 Instance</a> section.</p>
<h2 id="initialize-hadr-between-source-and-target-pod">Initialize HADR between Source and Target POD</h2>
<p>This Db2 Shift option will take a source and destination (POD)
database and start the HADR service between them. The Db2u pod must have been created with the following setting
during the shift step.</p>
<p>The panel requires the following information:</p>
<ul>
<li>The source database name and server</li>
<li>The destination POD and server details</li>
</ul>
<p>The syntax for initiating the HADR connection between two Db2 servers is:</p>
<pre><code class="language-bash">db2shift

    Required Options     

    --mode=hadr_setup  
    --dest-type=POD
    --oc or --kubectl                                                                                       
    --source-dbname=flights
    --source-hadr-host=some.server.com
    --source-hadr-port=3700  
    --dest-server=c-demo-db2u-0
    --dest-hadr-host=oc.server.com
    --dest-hadr-port=3700

    Optional Settings

    --dest-namespace=db2u
</code></pre>

<p>More details can be found in the <a href="../hadrpod/">Initialize HADR between Source and Target POD</a> section.</p>
<h2 id="initialize-hadr-between-source-and-target-instance">Initialize HADR between Source and Target Instance</h2>
<p>This menu is similar to the previous one where the HADR service is setup between the source
Db2 database and another Db2 instance. The Db2 database on the target system must have been
created with one of the following settings during the shift step.</p>
<p>The panel requires the following information:</p>
<ul>
<li>The source database name and server</li>
<li>The destination server details</li>
</ul>
<p>The syntax for initiating the HADR connection between two Db2 servers is:</p>
<pre><code class="language-bash">db2shift

    Required Options     

    --mode=hadr_setup  
    --dest-type=OTHER
    --ssh                                                                                   
    --source-dbname=flights
    --source-hadr-host=some.server.com
    --source-hadr-port=3700  
    --dest-server=db2inst1@other.server.com
    --dest-hadr-host=oc.server.com
    --dest-hadr-port=3700
</code></pre>

<p>More details can be found in the <a href="../hadrinstance/">Initialize HADR between Source and Target Instance</a> section.</p>
<h2 id="initialize-dmc-and-ldap-authentication-for-cp4d">Initialize DMC and LDAP Authentication for CP4D</h2>
<p>When shifting a database to a CP4D platform or LDAP-secured environment, the Db2 Shift program will automatically
add the appropriate userids to the LDAP service and reset the Data Management Console (DMC) so 
that it recognizes the database.</p>
<p>If you choose to shift a database and set it up as an HADR secondary, the LDAP and DMC setup
cannot be performed until {r}after{n} you have initialized and started the connection between
the primary and secondary databases. In order to update the LDAP and DMC services, you must
run this step immediately after the HADR initialization and startup.</p>
<p>The syntax for initiating the LDAP update and DMC reset is:</p>
<pre><code class="language-bash">db2shift

    Required Options     

    --mode=sec_and_monitor                                                   
    --dest-type=POD                                                     
    --oc or --kubectl
    --source-owner=db2inst1
    --dest-dbname=flights
    --dest-server=c-demo-db2u-0

    Optional Settings

    --dest-namespace=db2u
</code></pre>

<p>More details can be found in the <a href="../ldapdmc/">Initialize DMC and LDAP Authentication for CP4D</a> section.</p>
<h2 id="clone-copy">Clone Copy</h2>
<p>This Db2 Shift command provides a feature that allows a user to copy an existing
database clone copy to a POD, or to retrieve a database clone from a POD. </p>
<p>Once a database clone has been generated, the copy can be moved to any location and then 
deployed locally. This option provides a convenient way of copying the database using 
Db2 Shift without having to use OpenShift or Kubernetes commands.</p>
<p>The panel requires the following information:</p>
<ul>
<li>Type of copy (From Source to Target or Target to Source)</li>
<li>Source cloned database directory</li>
<li>Target cloned database directory</li>
<li>The destination POD and server details</li>
</ul>
<p>The syntax for copying a cloned database to a POD:</p>
<pre><code class="language-bash">db2shift

    Required Options         

    --mode=push_clone (Source to Target)
    --mode=pull_clone (Target to Source)
    --dest-type=POD
    --oc or --kubectl
    --dest-server=c-demo-db2u-0
    --local-dir=/tmp/cache
    --dest-dir=/tmp/cache

    Optional Settings

    --dest-namespace=db2u
</code></pre>

<p>More details can be found in the <a href="../clonecopy/">Clone Copy</a> section.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../shiftpod/" class="btn btn-neutral float-right" title="Db2 Shift to Pod">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../reference/" class="btn btn-neutral" title="Options Reference"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../reference/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../shiftpod/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
