<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Pre-Requisites - Click to Containerize</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Pre-Requisites";
    var mkdocs_page_input_path = "prerequisites.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Click to Containerize</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Pre-Requisites</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#target-users">Target Users</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#db2-shift-program-requirements">Db2 Shift Program Requirements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#connectivity-requirements">Connectivity Requirements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#userid-and-authentication-requirements">Userid and Authentication Requirements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#target-database-requirements">Target Database Requirements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#source-database-requirements">Source Database Requirements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cloud-pak-for-data-requirement">Cloud Pak for Data Requirement</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Command Line</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../syntax/">Db2 Shift Syntax</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../reference/">Options Reference</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Command Line Scenarios</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../scenarios/">Db2 Shift Scenarios</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../shiftpod/">Db2 Shift to Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../shiftinstance/">Db2 Shift to Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../clone/">Clone a Database</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deploypod/">Deploy a Clone to a Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../deployinstance/">Deploy a Clone to an Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../hadrpod/">HADR Setup Instance to Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../hadrinstance/">HADR Setup Instance to Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ldapdmc/">LDAP and DMC Initialization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../clonecopy/">Clone Copying</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">User Interface Scenarios</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../gui/">User Interface Overvew</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guishifttopod/">UI Shift to POD</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guishifttoinstance/">UI Shift to Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guiclone/">UI Clone a Database</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guideploytopod/">UI Deploy a Clone to a Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guideploytoinstance/">UI Deploy a Clone to an Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guihadrpod/">UI HADR Setup Instance to Pod</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guihadrinstance/">UI HADR Setup Instance to Instance</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guildapdmc/">UI LDAP and DMC Initialization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../guiclonecopy/">UI Clone Copying</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Reference</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../reference/">Options Reference</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../support/">Support</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../disclaimer/">Disclaimer</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Click to Containerize</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Pre-Requisites</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="pre-requisites">Pre-requisites</h1>
<p>The are a number of pre-requisites for running the Db2 Shift program itself, 
as well as requirements related to the Db2 database and the target Db2
system. The Db2 Shift program will analyze the source database and prevent
any shifts from occuring that will not work because of the target database
environment.</p>
<p>An additional analysis feature is also provided which will determine if 
any INSTANCE parameters on the source system need to be moved to the
TARGET system. The database can be shifted without the corresponding
target INSTANCE settings being modified, but it may affect the behavior of the
database when it is running in the new environment.</p>
<h2 id="target-users">Target Users</h2>
<p>The Db2 Shift program has been designed for experienced DBAs or casual users through the GUI interface. It is more
likely that the user interface will be used for analysis and initial testing while production use will more likely use the command line version. </p>
<p>The user requires intimate knowledge of current INSTANCE settings to make sure the containerized 
environment has sufficient resources to run the workloads. Further details of what is required to run the Db2 Shift program is 
described below.</p>
<h2 id="db2-shift-program-requirements">Db2 Shift Program Requirements</h2>
<p>The Db2 Shift program is a single executable Linux program that can be 
installed in any directory. The only requirement is that the program is marked as executable 
and is accessible to the Db2 INSTANCE owner.</p>
<p>The program itself is self-contained and does not require any additional 
libraries to run. The program can be removed by simply deleting the file. When
the program executes, it will generate temporary files that are used during the
shift process. It is recommended that the program be run from within a directory
so that all files generated can be easily found.</p>
<p>The program itself requires only 8M of space and sufficient disk space for the
log and control files that are generated. </p>
<p>The following Linux environments have been tested as source systems:</p>
<ul>
<li>Linux X64, CentOS (7,8), CentOS Stream, Redhat (7,8) Ubuntu 18.04, 20.04</li>
<li>SUSE has not been verified</li>
<li>Linux PPC (PowerPC) Little Endian has been tested as a target location</li>
</ul>
<h2 id="connectivity-requirements">Connectivity Requirements</h2>
<p>The shifting of a database from one environment to another requires connectivity between
the servers. The process by which Db2 Shift moves data requires a connecion to either 
an OpenShift/Kubernetes/CP4D cluster, a server-less ssh connection, or a local connection.</p>
<p>When shifting data to OpenShift, Kubernetes, or CP4D, the Db2 Shift program will
require the following:</p>
<ul>
<li>
<p>A suitable client for the Cluster software</p>
<ul>
<li>OpenShift CLI (oc) for OpenShift and Cloud Pak for Data shifts</li>
<li>Kuberbetes CLI (kubectl) for all Kubernetes clusters</li>
<li>SSH serverless connection to the target system</li>
<li>Local connection does not require a client but is only available for deployment of cloned databases
<br/>
</br></li>
</ul>
</li>
<li>
<p>OpenShift Version 3.11, 4.x </p>
</li>
<li>Cloud Pak for Data 3.5, 4.x</li>
<li>Kubernetes Version 1.19</li>
<li>A connection between the Source and Target servers </li>
<li>Sufficient disk space in /tmp or other directory (for Clone operations only)</li>
</ul>
<h2 id="userid-and-authentication-requirements">Userid and Authentication Requirements</h2>
<p>The Db2 Shift operation must take place under the userid of the INSTANCE owner of the database
being shifted. Traditionally this userid has been <code>db2inst1</code> but may be different in your environment.
The user must be logged in as the INSTANCE owner and must have access to the <code>db2shift</code> command.</p>
<p>The instance owner must also have <code>ssh</code> server-less connectivity to the TARGET system if a 
Db2 to Db2 instance shift is being performed. The <code>ssh</code> connection is not required when shifting
into a containerized (OpenShift, Kubernetes, CP4D) environment.</p>
<p>To access the TARGET pod in a cluster, the user must have authenticated to OpenShift or Kubernetes and
have access to the POD that Db2 is running on. For OpenShift environments, authentication is 
done either through a userid and password or a token. An example of connecting with a userid/password:</p>
<p><code>oc login -u ocadmin -p ocadmin</code></p>
<p>Shifting to Cloud Pak for Data does not require a CP4D userid. The OpenShift userid or token for the 
underlying cluster is required to authenticate for the Db2 Shift operation.</p>
<p>Kubernetes installations will require the use of a profile (Config) to connect to the cluster. </p>
<p>For both OpenShift and Kubernetes shift operations, the namespace (Kubernetes) or project (OpenShift) name
will be required. In the case of CP4D the namespace is usually <code>cp4d</code> but it depends on how the cluster
was deployed. In OpenShift and Kubernetes, the default namespace/project must be set <strong>prior</strong> to 
running the Db2 Shift command. You can override the namespace and project in the command but setting
the namespace prior to executing the script will minimize errors with Db2u pods not being found.</p>
<h2 id="target-database-requirements">Target Database Requirements</h2>
<p>The target database must be created before running the Db2 Shift command. The Db2 Shift command 
cannot create the database for you. You must use the CP4D console to create a new database, or the
Db2u Operators on OpenShift or Kubernetes to create and deploy the Db2 database. For traditional Db2
installations, the database would be created using the <code>db2setup</code> or <code>db2_install</code> program.</p>
<p>The new database name should be the same as the database being shifted. This is a strict requirement
for CP4D databases, but not necessary for the the other environments. Db2 Shift will take the existing
database and rename it to the target database name.</p>
<p>Db2 databases created in clustered environments are always created at the latest level (11.5.7+). For
databases that are created using the <code>db2install</code> command, a minimum level of 11.5 should used since 
prior versions are now considered out of service.</p>
<p>In addition, the nodes of an MPP configuration must match that of the SOURCE database and the 
memory, disk, and cores <strong>should</strong> match the SOURCE database requirements. </p>
<h2 id="source-database-requirements">Source Database Requirements</h2>
<p>The source database can be moved as long as the following conditions are met:</p>
<ul>
<li>The database resides on a Linux server (X64 or PowerLinux LE)</li>
<li>The database was created with Automatic storage</li>
<li>The database is an OLTP, SMP, or MPP system</li>
<li>Row or Column mode storage, including encrypted databases</li>
<li>Mirror, Archive, and Overflow Logs</li>
<li>User Defined Functions/Procedures located in the SQL lib Directory</li>
<li>Db2 Version 10.5, 11.1, or 11.5 servers can be moved and upgraded at the same time</li>
</ul>
<p>The following features are not currently supported:</p>
<ul>
<li>pureScale Feature (Not available yet in the Db2u container) </li>
<li>Spatial, Text Extender </li>
</ul>
<p>There are a few configuration settings which cannot be shifted:</p>
<ul>
<li>Only databases created with automatic storage are supported</li>
<li>The system contains external procedures which are not in the standard Db2 library - these will need to be manually recreated and catalogued</li>
<li>The LOGARCHMETH1/2 setting only supports DISK as a target in Db2u</li>
<li>The database encryption keys will be moved to the new location, but if the target already has encrypted databases then you will need to manually migrate the encryption key to the target location</li>
</ul>
<h2 id="cloud-pak-for-data-requirement">Cloud Pak for Data Requirement</h2>
<p>If you are shifting a database to Cloud Pak for Data, and your INSTANCE userid is <strong>not</strong> db2inst1, you 
must execute the following SQL commands from a userid that has SECADM authority:</p>
<pre><code>GRANT SECADM ON DATABASE TO db2inst1
GRANT DBADM  ON DATABASE TO db2inst1 
</code></pre>
<p>The <code>db2inst1</code> userid does not need to exist in the Operating system in order to grant these privileges to the userid. This
requirement does not apply to other Db2 Shift environments. If <code>db2inst1</code> is not defined as a <code>SECADM</code> and <code>DBADM</code> user in the
database, the Data Management Console feature of CP4D will not be able to access the database nor will it be able to monitor it.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../installation/" class="btn btn-neutral float-right" title="Installation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../installation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
