
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>Shift Considerations - Db2 Click to Containerize</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#shift-considerations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Db2 Click to Containerize" class="md-header__button md-logo" aria-label="Db2 Click to Containerize" data-md-component="logo">
      
  <img src="../img/IBM_logo®_rev_RGB.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Db2 Click to Containerize
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Shift Considerations
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Db2 Click to Containerize" class="md-nav__button md-logo" aria-label="Db2 Click to Containerize" data-md-component="logo">
      
  <img src="../img/IBM_logo®_rev_RGB.png" alt="logo">

    </a>
    Db2 Click to Containerize
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../prerequisites/" class="md-nav__link">
        Pre-Requisites
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Shift Considerations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Shift Considerations
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#database-migration-and-upgrades" class="md-nav__link">
    Database Migration and Upgrades
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#online-versus-offline-mode" class="md-nav__link">
    Online Versus Offline Mode
  </a>
  
    <nav class="md-nav" aria-label="Online Versus Offline Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#online-mode" class="md-nav__link">
    Online Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#offline-mode" class="md-nav__link">
    Offline Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instance-ownership" class="md-nav__link">
    Instance Ownership
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-db2-environment" class="md-nav__link">
    Target Db2 Environment
  </a>
  
    <nav class="md-nav" aria-label="Target Db2 Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloning-into-a-containerized-environment" class="md-nav__link">
    Cloning into a Containerized Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloning-into-a-traditional-db2-instance" class="md-nav__link">
    Cloning into a Traditional Db2 Instance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hadr-considerations" class="md-nav__link">
    HADR Considerations
  </a>
  
    <nav class="md-nav" aria-label="HADR Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hadr-to-cp4d-pod" class="md-nav__link">
    HADR to CP4D POD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hadr-using-a-clone-copy" class="md-nav__link">
    HADR using a Clone Copy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-storage-relocation" class="md-nav__link">
    Database Storage Relocation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#force-database-creation-and-mirror-paths" class="md-nav__link">
    Force Database Creation and Mirror Paths
  </a>
  
    <nav class="md-nav" aria-label="Force Database Creation and Mirror Paths">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mirror-path-only" class="md-nav__link">
    Mirror Path (Only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mirror-path-and-force-database-creation" class="md-nav__link">
    Mirror Path and Force Database Creation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypted-databases" class="md-nav__link">
    Encrypted Databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-instance-and-environment-settings" class="md-nav__link">
    Database, Instance, and Environment Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threads-and-compression" class="md-nav__link">
    Threads and Compression
  </a>
  
    <nav class="md-nav" aria-label="Threads and Compression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#threads" class="md-nav__link">
    Threads
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-scenario" class="md-nav__link">
    Test Scenario
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    Compression
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../gui/" class="md-nav__link">
        User Interface Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Authentication" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ssh/" class="md-nav__link">
        SSH Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cluster/" class="md-nav__link">
        Cluster Authentication
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Command Line
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command Line" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Command Line
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../syntax/" class="md-nav__link">
        Db2 Shift Syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Options Reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Shift Scenarios
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Shift Scenarios" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Shift Scenarios
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scenarios/" class="md-nav__link">
        Scenario Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shiftpod/" class="md-nav__link">
        Db2 Shift to Pod
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shiftinstance/" class="md-nav__link">
        Db2 Shift to Instance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clone/" class="md-nav__link">
        Clone a Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploypod/" class="md-nav__link">
        Deploy a Clone to a Pod
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployinstance/" class="md-nav__link">
        Deploy a Clone to an Instance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hadrpod/" class="md-nav__link">
        HADR Setup Instance to Pod
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hadrinstance/" class="md-nav__link">
        HADR Setup Instance to Instance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ldapdmc/" class="md-nav__link">
        LDAP and DMC Initialization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clonecopy/" class="md-nav__link">
        Clone Copying
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Options Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        Support
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../disclaimer/" class="md-nav__link">
        Disclaimer
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#database-migration-and-upgrades" class="md-nav__link">
    Database Migration and Upgrades
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#online-versus-offline-mode" class="md-nav__link">
    Online Versus Offline Mode
  </a>
  
    <nav class="md-nav" aria-label="Online Versus Offline Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#online-mode" class="md-nav__link">
    Online Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#offline-mode" class="md-nav__link">
    Offline Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instance-ownership" class="md-nav__link">
    Instance Ownership
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-db2-environment" class="md-nav__link">
    Target Db2 Environment
  </a>
  
    <nav class="md-nav" aria-label="Target Db2 Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloning-into-a-containerized-environment" class="md-nav__link">
    Cloning into a Containerized Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloning-into-a-traditional-db2-instance" class="md-nav__link">
    Cloning into a Traditional Db2 Instance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hadr-considerations" class="md-nav__link">
    HADR Considerations
  </a>
  
    <nav class="md-nav" aria-label="HADR Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hadr-to-cp4d-pod" class="md-nav__link">
    HADR to CP4D POD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hadr-using-a-clone-copy" class="md-nav__link">
    HADR using a Clone Copy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-storage-relocation" class="md-nav__link">
    Database Storage Relocation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#force-database-creation-and-mirror-paths" class="md-nav__link">
    Force Database Creation and Mirror Paths
  </a>
  
    <nav class="md-nav" aria-label="Force Database Creation and Mirror Paths">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mirror-path-only" class="md-nav__link">
    Mirror Path (Only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mirror-path-and-force-database-creation" class="md-nav__link">
    Mirror Path and Force Database Creation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypted-databases" class="md-nav__link">
    Encrypted Databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-instance-and-environment-settings" class="md-nav__link">
    Database, Instance, and Environment Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threads-and-compression" class="md-nav__link">
    Threads and Compression
  </a>
  
    <nav class="md-nav" aria-label="Threads and Compression">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#threads" class="md-nav__link">
    Threads
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-scenario" class="md-nav__link">
    Test Scenario
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    Compression
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="shift-considerations">Shift Considerations</h1>
<p>There are several things you should consider before
performing a Db2 Shift. Many of these recommendations
are evolving and updates will be added to this document on a
regular basis.</p>
<h2 id="database-migration-and-upgrades">Database Migration and Upgrades</h2>
<p>The Db2 Shift command will migrate a database from Version
10.5 and 11.1 to the latest version of Db2 (11.5). Databases
that are at older release levels will need to be migrated to
10.5 or 11.1 before using the Db2 Shift utility.</p>
<p>When performing a Db2 Shift on an older release, the
database must be shut down or DEACTIVATED before a shift can
be performed. All Db2 upgrades require that the database be
in a fully consistent state for the upgrade to take place.
The utility will fail if the database was in a WRITE SUSPEND
state.</p>
<p>If the Db2 Shift utility is run against a database which
requires migration, it will check to see if <code>--offline</code> or
<code>--online</code> was supplied in the command line or in the user
interface. If <code>--offline</code> was set, the Db2 Shift utility will
shift the files assuming the database is offline. If the
database was not offline, the upgrade at the target will
fail because the control information in the database files
will not be consistent.</p>
<p>If <code>--online</code> was selected, and a migration is required, Db2
will force the database into a DEACTIVATED state. This will
cause a database outage and potentially rollback
transactions that were in progress. Make sure that the
database does not have any workloads running against it if
you decide to shift when using the <code>--online</code> mode. Note that
having a database in DEACTIVATED state is not a guarantee
that no one can connect to the database.</p>
<p>The other option to reduce outage time for a database is to
use the clone option. A clone copy can be used for an
upgrade and the database can be write suspended when using
this mode of operation.</p>
<p>Make sure to prune your log archive files to minimize the amount of data that is 
transmitted during the shift step:</p>
<pre><code>db2 prune history yyyymmdd 
</code></pre>
<p>In summary, when shifting a database that needs an upgrade,
using one of the following techniques:</p>
<ul>
<li>Shut down the database and use the <code>--offline</code> flag</li>
<li>Use the <code>--online</code> flag and let Db2 DEACTIVATE the database</li>
<li>Clone the database (and deploy later) using the <code>--online</code> flag
 </li>
</ul>
<h2 id="online-versus-offline-mode">Online Versus Offline Mode</h2>
<p>Db2 Shift provides two options when dealing with the state
of a database during the shift process:</p>
<ul>
<li><code>--online</code> mode - the database is online while the shift is taking place</li>
<li><code>--offline</code> mode - the database has been shutdown</li>
</ul>
<h3 id="online-mode">Online Mode</h3>
<p>Online mode is the default value for all shifts. While this
can be used for shifting databases that require an upgrade,
the recommendation is to use <code>--offline</code> mode instead.</p>
<p>When shifting a database in <code>--online</code> mode, the file copy
step will not affect the status of the database. Workloads
can continue to run while the copying is taking place. Note
that the buffer pools may be affected by the reading process
so there may be lower cache utilization while the utility is
running.</p>
<p>During the last step of the shift process, Db2 Shift will
search for any updates that may have been applied to the
database after the initial copying was done. To ensure the
integrity of the data being copied, the database will be
placed into a WRITE SUSPEND mode. This last step should only
take a few seconds and the database will be WRITE RESUMED
when the final copy is done.</p>
<p>When the database is suspended, all read activities will
continue. New connections will not be permitted, but any
applications that are currently running will be allowed to
continue. Those transactions that are updating records will
be temporarily "paused" while the copying is done.</p>
<p>Once the copy is complete, a suspended application will
finish their transaction. Online mode provides the least
disruption to an active database but is not recommended for
databases that being upgrade.</p>
<h3 id="offline-mode">Offline Mode</h3>
<p>Offline mode should be used for database migrations. If it
is not used, the Db2 Shift utility will DEACTIVATE the
database before continuing.</p>
<p>Offline mode indicates to Db2 Shift that the database has
either been DEACTIVATED or the instance has been shut down.
If you want to use offline mode, you must first gather the
control information while the database is online. To do
this, either through the command, or the UI, select
<code>--blank-slate=true</code> <code>--verify</code>.</p>
<p>The <code>--blank-slate=true</code> option will gather the source and
target control information that is required to do a shift.
If the source database was already offline, this information
would not available.</p>
<p>Adding the <code>--verify</code> option will check that all the settings
are correct between the source and target and stop execution
(i.e., the shift will not occur).</p>
<p>After your shut down the source database you would use the
option <code>--blank-slate=false</code>. This will force Db2 Shift to use
the existing control information that you generated in the
previous step. At this point the database will be a
consistent state and the upgrade step will proceed at the
target location.</p>
<h2 id="instance-ownership">Instance Ownership</h2>
<p>If you are moving a database that was created with an
instance owner that is not found on the target system, you
must make sure to add the instance owner at the target into
the current database before shifting the database.</p>
<p>Example: Database CQW was created by instance owner
<code>db2inst2</code>. This database is then cloned to another instance
that has <code>db2inst1</code> as the instance owner. When <code>db2inst1</code>
attempts to access the database, they will be unable to
manage it because they do not have <code>DBADM</code> or <code>SECADM</code>
privileges on the tables created by <code>db2inst2</code>.</p>
<p>There are two ways to solve this. One is to create the
userid <code>db2inst2</code> at the destination location for a
traditional instance. You would then be able to connect to
the database as <code>db2inst2</code> and grant <code>DBADM</code> and <code>SECADM</code> back to
<code>db2inst1</code>. However, this approach will not work with Db2U and
CP4D installations because there is no mechanism available
within the POD to create a new OS-level userid.</p>
<p>The second (and easier) method is to add the destination
instance owner to the source database.</p>
<pre><code>GRANT SECADM ON DATABASE TO USER db2inst1
GRANT DBADM  ON DATABASE TO USER db2inst1
</code></pre>
<p>The <code>db2inst1</code> userid does not need to exist in the Operating
system to grant these privileges to the userid. Once the
database is shifted to the new location, the instance owner
<code>db2inst1</code> will have full access to the database.</p>
<h2 id="target-db2-environment">Target Db2 Environment</h2>
<p>The Db2 Shift program can clone an existing Db2 database into two environments:</p>
<ul>
<li>Db2U Pod running on OpenShift, Kubernetes, Cloud Pak for Data</li>
<li>Db2 Instance on premise, on a virtual machine (on premise or Cloud)</li>
</ul>
<h3 id="cloning-into-a-containerized-environment">Cloning into a Containerized Environment</h3>
<p>For instances where you are shifting to a Db2U POD, the POD must already exist, and the
database must have been created. Depending on what you plan to do with the target
database, the database name must be:</p>
<ul>
<li>
<p>The same as the SOURCE database if:</p>
<ul>
<li>You are connecting the source and target with HADR</li>
<li>You are cloning the database into Cloud Pak for Data</li>
<li>You want to keep the same database name</li>
</ul>
</li>
<li>
<p>Any valid database name</p>
</li>
</ul>
<p>If you move a database (i.e., SAMPLE) into a Db2U POD database called DB2OLTP, the
contents of the database SAMPLE will end up in DB2OLTP. In other words, the SAMPLE
database is shifted and renamed to DB2OLTP. If you want to have the same database name,
then you must create the database with the same name.</p>
<h3 id="cloning-into-a-traditional-db2-instance">Cloning into a Traditional Db2 Instance</h3>
<p>When cloning a Db2 database into a traditional instance, the Db2 database can already
exist, or you can ask that the database be generated for you at shift time. The Db2
instance must be available and running on the server.</p>
<p>Syntax: <code>--dest-create-db</code>
<img alt="Target Database" src="../img/field_force_create.png" /></p>
<p>To create the database at shift time, make sure the select the <code>Force Database Creation</code>
setting in the UI menu or use <code>--dest-db-create</code> flag in the command line. The Db2 Shift program
will attempt to create the database in a directory structure under <code>/db2_portable</code> on the
target system.</p>
<p>When cloning into a traditional Db2 instance, similar rules apply to the database name.
The database name must be:</p>
<ul>
<li>
<p>The same as the SOURCE database if:</p>
<ul>
<li>You are connecting the source and target with HADR</li>
<li>You want to keep the same database name</li>
</ul>
</li>
<li>
<p>Any valid database name</p>
</li>
</ul>
<h2 id="hadr-considerations">HADR Considerations</h2>
<p>The HADR option can be used to create a standby version of the primary
database for either HA capabilities, or for syncing the source and target until the
decision is made to move all database workloads to the standby.</p>
<p>Syntax: <code>--hadr</code>, <code>--mode=hadr_setup</code>
<img alt="Mode" src="../img/field_move_hadr.png" />
<img alt="HADR" src="../img/field_hadr.png" /></p>
<p>The requirements for creating an HADR pair are:</p>
<ul>
<li>The databases must both be at the same level (Upgrade not supported)</li>
<li>The primary must have logging enabled and a full backup generated before shifting</li>
</ul>
<pre><code>update db config for trading using logarchmeth1 DISK:/home/db2inst1/logfiles
update db config for trading using logindexbuild on
connect reset
backup database trading to /dev/null
</code></pre>
<ul>
<li>Set Read on Standby if required</li>
</ul>
<pre><code>db2set DB2_HADR_ROS=ON
db2stop force
db2start
</code></pre>
<ul>
<li>Open ports on the primary (3700) and on the secondary only if it is a traditional instance</li>
</ul>
<p>The steps for creating an HADR primary and standby pair with Db2 Shift are:</p>
<ol>
<li>
<p>Run a shift (or clone) to an instance or POD while the database is online</p>
<ul>
<li>The target database must have the same database name - Db2 Shift will not run if 
    they have different names</li>
</ul>
</li>
<li>
<p>Run the HADR setup for POD or Instance</p>
</li>
</ol>
<p>At this point the two databases will be in NEARSYNC mode and will be in an HA configuration
until you decide to turn the standby into the new primary.</p>
<h3 id="hadr-to-cp4d-pod">HADR to CP4D POD</h3>
<p>If you choose to use HADR to connect to a standby Db2 running on CP4D, you will need to 
use the LDAP/DMC utility <strong>after</strong> you have switched the CP4D Db2 POD into the primary.</p>
<p>Syntax: <code>--mode=sec_and_monitor</code></p>
<p>At this point you must enable the LDAP connection to CP4D as well as register the
database to the Data Management Console on CP4D. While the database was running as 
a standby database, the LDAP and DMC connections settings could not be updated because the
database was in read-only mode and needed to be identical to the primary database. 
After the switch to primary
status, you are now able to register the database to CP4D and be able to manage it
from the DMC console.</p>
<h3 id="hadr-using-a-clone-copy">HADR using a Clone Copy</h3>
<p>You can use a Clone copy of a database to create an HADR pair. The Clone copy must have been
created with the following pre-requisites:</p>
<ul>
<li>The databases must both be at the same level (Upgrade not supported)</li>
<li>The primary must have logging enabled and a full backup generated before generating the Clone</li>
<li>The primary was online during the cloning process</li>
</ul>
<p>Once you create the Standby database (Deploy to Instance), you must copy the following files from the
target server (where you ran the Db2 Shift deploy command) and copy them to the source system where you 
ran the original Db2 Shift clone command:</p>
<ul>
<li>source.settings</li>
<li>destination.settings</li>
</ul>
<p>At the source system, run the HADR initialization step for a POD or Instance.</p>
<p>When the HADR initialization is run after a 
standard shift operation, the settings files would have been generated at the same time. Since you
are using a Clone copy, there is no information available about the destination server, so these files 
need to be made available to Db2 Shift in order for the HADR command to work.</p>
<h2 id="database-storage-relocation">Database Storage Relocation</h2>
<p>When shifting a database to a POD or to another Db2 instance, the storage
paths will need to be modified in order for Db2 to run. The
<code>dft_paths.cfg</code> file contains information on where the
Db2 Shift utility will place database objects on the destination server. If
the <code>dft_paths.cfg</code> file does not already exist in the directory where the
Db2 Shift utility is running, the file will be created during the first
execution of the utility.</p>
<p>The <code>dft_paths.cfg</code> file contains 2 sets of paths, one for DB2u Pod/Container
deployments and the other for standard Instance installs
classified as server-type <code>other</code>.</p>
<p>You can alter the type “other” paths in the file as long as you do not change the
<code>DFT_STORAGE_PATH</code> variable. The <code>{}</code> characters in a path signifies where <code>$HOME</code>
will be substituted into the string. If the <code>{}</code> characters are removed, the absolute
path will be used.</p>
<p>A copy of the file is shown below. The format of the file is:</p>
<pre><code>PATH | Directory | type
</code></pre>
<p>Where:</p>
<ul>
<li>Path Type - The type of path that the directory represents</li>
<li>Directory - The directory that will be used for the path type</li>
<li>Target - <code>pod</code> for Db2U deployments and <code>other</code> for Db2 instance deployments</li>
</ul>
<pre><code>MIRRORLOG_PATH|/mnt/bludata0/db2/mirrorlog|pod
FAILARCHIVE_PATH|/mnt/bludata0/db2/failarchive|pod
LOGARCHMETH1|/mnt/bludata0/db2/archive_log|pod
LOGARCHMETH2|/mnt/bludata0/db2/archive_log2|pod
OVERFLOWLOG_PATH|/mnt/bludata0/db2/overflowlog|pod
DFT_STORAGE_PATH|/mnt/bludata0/db2/databases/|pod
OTHER_STORAGE_PATH|/mnt/bludata0/db2/databases/SPATH|pod
OTHER_LOG_PATH|/mnt/bludata0/db2/dblogs|pod
MIRRORLOG_PATH|{}/db2_portable/mirror_logs/mirrorlog|other
FAILARCHIVE_PATH|{}/db2_portable/failarchive|other
LOGARCHMETH1|{}/db2_portable/archive_log|other
LOGARCHMETH2|{}/db2_portable/archive_log_mirror|other
OVERFLOWLOG_PATH|{}/db2_portable/overflow_logs/overflowlog|other
DFT_STORAGE_PATH|{}|other
OTHER_LOG_PATH|{}/db2_portable/primary_logs/dblogs|other
NEW_DB_ON|/db2_portable/databases|other
OTHER_STORAGE_PATH|{}/db2_portable/alt_store_paths/SPATH|other
</code></pre>
<p>You must update this file <strong>prior</strong> to running a shift operation. The Db2 Shift utility
will use the existing <code>dft_paths.cfg</code> file to relocate the directories into the
target location.</p>
<p><strong>Note</strong>: The <code>dft_path.cfg</code> is setup to transfer multiple databases and their paths under 
the <code>/$HOME/db2_portable</code> directory.</p>
<p>The following paths, as defined in <code>dft_paths.cfg</code> 
can be modified using the <code>mount</code> utility on Linux to point them to a different directory.</p>
<pre><code>MIRRORLOG_PATH|{}/db2_portable/mirror_logs/
FAILARCHIVE_PATH|{}/db2_portable/failarchive/
LOGARCHMETH1|{}/db2_portable/archive_log/
LOGARCHMETH2|{}/db2_portable/archive_log_mirror/
OVERFLOWLOG_PATH|{}/db2_portable/overflow_logs/
OTHER_LOG_PATH|{}/db2_portable/primary_logs/
</code></pre>
<p>Note that the mount path depends on the path type e.g., <code>MIRRORLOG_PATH</code> 
is not necessarily at the end of the path defined in the default config. 
That is because of the unique naming requirement for paths and the assumption 
that paths need to be multi-tenant capable.</p>
<p>For instance:</p>
<ul>
<li>Mirror log path: <code>MIRRORLOG_PATH = {}/db2_portable/mirror_logs/mirrorlog</code></li>
<li>Mount path for db2inst1 alternate mirrored logs volume: <code>/home/db2inst1/db2_portable/mirror_logs</code></li>
</ul>
<p>If we were to change the config file simply to point at the
mirror logs path using an alternate absolute path, your
config file entry would look like:</p>
<pre><code>MIRRORLOG_PATH|/mnt/mirror_logs/mirrorlog|other
</code></pre>
<p>For your absolute path you would need to create the directory
prior to the shift :</p>
<pre><code>mkdir /mnt/mirror_logs
</code></pre>
<p><strong>Note</strong>: The Db2 Shift tool creates the <code>dft_paths.cfg</code> on start-up if
it does not already exist. If you need to recreate the
file with default values, simply delete the file. If the file
already exists in the directory, it will not be recreated by
the tool.</p>
<p><strong>Note</strong>: <code>DFT_STORAGE_PATH</code> and <code>NEW_DB_ON</code> paths should not
be changed. <code>NEW_DB_ON</code> controls where any database created
by the tool goes on the target instance, and this path is
always relative to the <code>$HOME</code> directory for the instance. If
you want the database created elsewhere, manually create it
first before running the tool. The other path changes,
as per above, will be observed. </p>
<p>For alternate Storage paths you can mount the volume at a
lower level, but you must know how many paths will be
included. This can be determined by looking at the <code>new0.cfg</code>
file after a generate settings run.</p>
<p>Syntax: <code>--blank-slate=true</code>, <code>--gen-settings</code>
<img alt="Meta Data" src="../img/field_settings_only.png" /></p>
<p>The <code>--gen-settings</code> (Generate Settings) option is used in
conjunction with <code>--blank-slate</code>. The use of
<code>--gen-settings</code> will prevent Db2 Shift from continuing
execution after the metadata files have been created.</p>
<p>Storage can also be set up by
MLN or NODE.</p>
<pre><code>OTHER_STORAGE_PATH|{}/db2_portable/alt_store_paths/SPATH[1..N]/NODE000X
</code></pre>
<p>For Example:</p>
<pre><code>/home/db2inst2/db2_portable/alt_store_paths/SPATH1/db2inst2/NODE0000
/home/db2inst2/db2_portable/alt_store_paths/SPATH1/db2inst2/NODE0001
/home/db2inst2/db2_portable/alt_store_paths/SPATH1/db2inst2/NODE0002
/home/db2inst2/db2_portable/alt_store_paths/SPATH1/db2inst2/NODE0003
/home/db2inst2/db2_portable/alt_store_paths/SPATH2/db2inst2/NODE0000
/home/db2inst2/db2_portable/alt_store_paths/SPATH2/db2inst2/NODE0001
/home/db2inst2/db2_portable/alt_store_paths/SPATH2/db2inst2/NODE0002
/home/db2inst2/db2_portable/alt_store_paths/SPATH2/db2inst2/NODE0003
/home/db2inst2/db2_portable/alt_store_paths/SPATH3/db2inst2/NODE0000
/home/db2inst2/db2_portable/alt_store_paths/SPATH3/db2inst2/NODE0001
/home/db2inst2/db2_portable/alt_store_paths/SPATH3/db2inst2/NODE0002
/home/db2inst2/db2_portable/alt_store_paths/SPATH3/db2inst2/NODE0003
</code></pre>
<p>You will have to pre-create the paths at the target server using this pattern
prior to shifting the database into it.</p>
<p>If you apply the mount at a lower point in the directory
structure, it will likely be deleted in the Db2 Shift process.</p>
<p><strong>Note</strong>: No changes to the <code>dft_paths.cfg</code> are
supported for moves to containers which are identified with the 
<code>pod</code> keyword at the end of a control line.</p>
<h2 id="force-database-creation-and-mirror-paths">Force Database Creation and Mirror Paths</h2>
<p>The Db2 Shift utility provides an option to create a database at the target location (Instance Only).
The option is available on the Shift to Instance and Deploy to Instance menus.</p>
<p>Syntax: <code>--dest-create-db</code> <code>--mirror-path</code>
<img alt="Target Database" src="../img/field_mirror_path.png" /></p>
<p>The following describes how Db2 Shift handles the creation of databases at the target instance:</p>
<ol>
<li>If no options are set:<ul>
<li>If the target database does not exist, an error message will be returned and processing stops</li>
<li>Otherwise, the contents of the target database will be replaced with the source database using the target's home database directory</li>
</ul>
</li>
<li>If <code>--dest-create-db</code> is set: <ul>
<li>If the target database exists, it will be <strong>dropped</strong>!</li>
<li>The target database is created using the path <code>/$HOME/db2_portable</code></li>
</ul>
</li>
<li>If <code>--mirror-path</code> is set:<ul>
<li>If the target database does not exist, an error message will be returned and processing stops</li>
<li>Otherwise, the contents of the target database will be replaced with the source database using 
  <strong>exactly the same paths</strong> as the source database</li>
</ul>
</li>
<li>If <code>--dest-create-db</code> and <code>--mirror-path</code> is set:<ul>
<li>If the target database exists, it will be <strong>dropped</strong>!</li>
<li>The target database is created, using <strong>exactly the same paths</strong> as the source database</li>
</ul>
</li>
</ol>
<p>Scenarios 3 and 4 require special care in their usage and are discussed below.</p>
<h3 id="mirror-path-only">Mirror Path (Only)</h3>
<p>When a request is made to use an existing database using <code>--mirror-path</code>, the following must be true:</p>
<ul>
<li>The directory structure used by the source database must be replicated at the target database</li>
<li>The instance owner and database name must be identical</li>
<li>The target instance owner must have appropriate permissions to read/write to these directories</li>
</ul>
<p>The shift or deploy operation will fail if a directory structure is not found at the target site.</p>
<p>Example: Database <code>TRADING</code> was created at the source using the following syntax:</p>
<pre><code>CREATE DATABASE TRADING ON /path1, /path2, /path3
</code></pre>
<p>In order for the <code>--mirror-path</code> option work correctly, the destination database must be created using
the identical paths:</p>
<pre><code>CREATE DATABASE TRADING ON /path1, /path2, /path3
</code></pre>
<p>You cannot change the name of the database when using this technique.</p>
<h3 id="mirror-path-and-force-database-creation">Mirror Path and Force Database Creation</h3>
<p>It is possible for the Db2 Shift Utility to create a database using mirror paths, but there are 
a number of limitations when using this feature. When Db2 Shift creates the target database, it will take all of the paths, except the default database path, and use them as the destination paths on the target instance. The paths must already exists, or the Db2 Shift utility must be able to create the paths.</p>
<p>If the generated database configuration directory number (e.g., <code>SQL00001</code>) does not match across source and target systems, an error will occur. In this case you should manually create the target database on a different path. This is a limitation of the Db2 relocation utility.</p>
<p>A simple example highlights the problem. Running a <code>db2 list db directory</code> on your source system may
result in 4 databases being displayed: <code>SAMPLE</code>, <code>HR</code>, <code>ACCOUNTS</code>, and <code>BANKING</code>. The target instance currently has no databases. When attempting to shift <code>ACCOUNTS</code> to the target system using <code>--dest-create-db</code> and <code>--mirror-path</code>, the shift will fail because <code>ACCOUNTS</code> is using <code>SQL00003</code> at the source and it will be created as <code>SQL00001</code> at the target. </p>
<p>The scenario that best suits the <code>--dest-create-db</code> and <code>--mirror-path</code> option is a Db2 instance that 
contains only 1 database that is being shifted to an empty Db2 instance.</p>
<h2 id="encrypted-databases">Encrypted Databases</h2>
<p>The Db2 Shift utility can only shift encryption keys that are available
locally to the database. If your database uses an enterprise key manager, then
you will need to register that key manager at the target pod or instance.</p>
<p>If you are shifting to another Db2 instance or pod that contains multiple
databases, you cannot shift the key file. During a shift, the target key file is
completely replaced which would remove any keys being used by existing
databases at the target location. If you want to shift the database to the new
location, you will have to extract the current key and reimport it into the target
key manager.</p>
<h2 id="database-instance-and-environment-settings">Database, Instance, and Environment Settings</h2>
<p>The Db2 Shift utility will maintain all database settings when the
database is shifted to a different Db2 instance or pod. However, the
Instance and Environment settings are not moved.</p>
<p>The Db2 Shift provides an option to override the target instance settings.
If a particular setting needs to be updated, you can provide the value as
part of the UI or command line. An example of a setting that you may want to
update during a shift is the <code>INSTANCE_MEMORY</code> and the <code>INTRA_PARALLEL</code> settings.</p>
<p>You should ensure that any change you make at the instance level are reflected in the
Db2U POD configuration in the event the Db2U code is replaced.</p>
<p>Environment settings are not handled by the Db2 Shift program. You must ensure that the
instance or Db2U POD have the appropriate environment variables set before you shift
the database. For instance, if you are shifting a Db2 database that has Oracle
compatibility turned on, you must create an empty Db2 database with this setting
turned ON before shifting the original database. There is no way to set the
compatibility flag after the database has been created.</p>
<h2 id="threads-and-compression">Threads and Compression</h2>
<p>One area that is still evolving is the use of threads and compression when shifting a database into a cloud environment. The Db2 Shift tool has been set to use default settings that give the best performance in networks that have 1Gb/s throughput. These settings will need to be adjusted based on your network and machine characteristics.
The following are some general observations from early testing.</p>
<h3 id="threads">Threads</h3>
<p>Using a higher number of threads is useful in situations
where the Db2 database has multiple paths defined for a
storage group. If the database was created with a single
storage path, the threads are competing for I/O on the same
device.</p>
<p>Increasing the number of threads will not necessarily result
in more throughput. Testing has shown that 4 threads is a
good starting point for parallelism, with small incremental
benefits as you increase the number. You need to balance the
CPU usage by the Shift utility and the impact on workloads
running on the server.</p>
<p>If the Db2 Shift command is being used for gradual shifts
(initial, refresh), the number of threads should be set to 1
to reduce the overhead on the server. Once the final shift
is run you may want to increase the value to minimize the
suspend time of the database.</p>
<p>If there is no contention on the server then the maximum
thread count should be 1 less than the number of VPCs of the
server or 8, whichever is less. For a cloud instance that is
defined with 4 cores, 8 VPCs (SMTx2), the thread count
should be a maximum of 7 (8 VPCs - 1).  For larger servers,
a maximum of 8 threads can be used.  </p>
<h3 id="test-scenario">Test Scenario</h3>
<p>The Db2 Shift command was run from a standard Db2 on Linux instance
and shifting the database to a Kubernetes
cluster with Db2U installed. The database size was
approximately 50Gb with 260+M rows of transactional data.</p>
<p>The best elapsed time was 237 seconds (131s copy time only).
Increasing the number of threads did not make a difference
to the total elapsed time. Examining the CPU usage, the
average utilization of the threads was almost identical
between 4 and 8 threads.</p>
<p>The network throughput appears to track with the CPU usage,
demonstrating that the CPUs are busy transmitting
as much data onto the network as possible.</p>
<p>The results showed that the maximum throughput was capped by
the network limit of 5Gb/s. The network throughput was:</p>
<ul>
<li>1 thread was 1240 Mb/sec</li>
<li>4 threads were 4890 Mb/sec</li>
</ul>
<p>A CPU thread has a limit on how much data it can push onto
the network. By running a test on a single thread, you can
determine how many cores you can effectively use during a
Shift run. Dividing the network capacity by the single core
performance will determine the optimal number of threads to
use.</p>
<p>Example:</p>
<ul>
<li>Throughput of one thread is approximately 1.2Gb/s</li>
<li>Network limit is 5Gb/s</li>
<li>5/1.2 is approximately 4 threads</li>
</ul>
<p>This result can also be used to determine your total copy time:</p>
<ul>
<li>Database Size/(Network Limit/8) = elapsed time</li>
<li>50 GB/(5Gbs/8) = 50GB/(.625GBs) = 80s with ideal conditions</li>
<li>Tests results were 50GB/(4.89Gbs/8) = 128s ideal (131 observed)</li>
</ul>
<p><strong>Note</strong>: These test results were run in a laboratory environment
with ideal conditions and
may not be applicable to your installation. You are advised to test
the throughput on your own system to determine the performance of the
Db2 Shift utility.</p>
<h3 id="compression">Compression</h3>
<p>Compression will significantly reduce throughput if you are
CPU constrained. If the database is encrypted, uses
compression, or has a high ratio of numeric values over
character values, adding compression will not help
throughput. In some cases, this may significantly reduce
throughput.</p>
<p>The recommendation is to use compression only if you have a
very slow network (&lt;1Gbps). For these types of situations,
the compression may result in less data being transferred
which will reduce the load on the network. Aside from this
situation, leaving compression at 0 is the best strategy for
initial Db2 Shift tests.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="../gui/" class="md-footer__link md-footer__link--next" aria-label="Next: User Interface Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              User Interface Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>