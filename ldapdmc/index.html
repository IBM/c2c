<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>LDAP and DMC Initialization - Db2 Click to Containerize</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "LDAP and DMC Initialization";
        var mkdocs_page_input_path = "ldapdmc.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Db2 Click to Containerize
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../prerequisites/">Pre-Requisites</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Command Line</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../syntax/">Db2 Shift Syntax</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reference/">Options Reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Command Line Scenarios</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/">Db2 Shift Scenarios</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../shiftpod/">Db2 Shift to Pod</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../shiftinstance/">Db2 Shift to Instance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../clone/">Clone a Database</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../deploypod/">Deploy a Clone to a Pod</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../deployinstance/">Deploy a Clone to an Instance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hadrpod/">HADR Setup Instance to Pod</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hadrinstance/">HADR Setup Instance to Instance</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">LDAP and DMC Initialization</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#mode-option">Mode Option</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#target-client">Target Client</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#source-or-instance-owner">Source or Instance Owner</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#destination-database">Destination Database</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#destination-server-pod">Destination Server (POD)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#destination-pod-namespace-or-project">Destination Pod Namespace or Project</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../clonecopy/">Clone Copying</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Interface Scenarios</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../gui/">User Interface Overvew</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guishifttopod/">UI Shift to POD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guishifttoinstance/">UI Shift to Instance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guiclone/">UI Clone a Database</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guideploytopod/">UI Deploy a Clone to a Pod</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guideploytoinstance/">UI Deploy a Clone to an Instance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guihadrpod/">UI HADR Setup Instance to Pod</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guihadrinstance/">UI HADR Setup Instance to Instance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guildapdmc/">UI LDAP and DMC Initialization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../guiclonecopy/">UI Clone Copying</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../reference/">Options Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../support/">Support</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../disclaimer/">Disclaimer</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Db2 Click to Containerize</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Command Line Scenarios &raquo;</li>
      <li>LDAP and DMC Initialization</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="ldap-and-dmc-initialization">LDAP and DMC Initialization</h1>
<p>This Db2 Shift option only applies when the destination is a POD on K8s or
OpenShift. If an associated LDAP repository exists, the db2inst1 user
is added. If the IBM Data management console is deployed with a 
Cloud Pak for Data system, it resets the console and applies the 
relevant DDL and privileges for monitors.</p>
<p><strong>Alert!</strong>
</br>
If you creating a database on Cloud Pak for Data, 
and your source INSTANCE userid is <strong>not</strong> db2inst1, you 
must execute the following SQL commands from a userid that has SECADM authority:</p>
<pre><code>GRANT SECADM ON DATABASE TO db2inst1
GRANT DBADM  ON DATABASE TO db2inst1 
</code></pre>
<p>The <code>db2inst1</code> userid does not need to exist in the Operating system in order to grant these privileges to the userid. This
requirement does not apply to other Db2 Shift environments. If <code>db2inst1</code> is not defined as a <code>SECADM</code> and <code>DBADM</code> user in the
database, the Data Management Console feature of CP4D will not be able to access the database nor will it be able to monitor it.</p>
<p>The panel requires the following information:</p>
<ul>
<li>Source database owner</li>
<li>The destination POD and server details</li>
</ul>
<p>The syntax for updating the LDAP security and initializing the DMC console is:</p>
<pre><code class="language-bash">db2shift

    Required Options     

    --mode=sec_and_monitor
    --dest-type=POD
    --oc or --kubectl
    --source-owner=db2inst1
    --dest-dbname=flights
    --dest-server=c-demo-db2u-0

    Optional Settings

    --dest-namespace=db2u
</code></pre>

<p>The panel that provides this capability:</p>
<p><img alt="ShiftPOD" src="../img/c2c_ldap_dmc.png" /></p>
<h2 id="mode-option">Mode Option</h2>
<p>Syntax: <code>--mode=sec_and_monitor</code></p>
<p>This setting only applies when the destination is a POD on K8s or
OpenShift. If an associated LDAP repository exists, the db2inst1 user
is added. If the IBM Data management console is deployed with a 
Cloud Pak for Data system, it resets the console and applies the 
relevant DDL and privileges for monitors.</p>
<h2 id="target-client">Target Client</h2>
<p>Syntax: <code>--oc</code>, <code>--kubectl</code>
<img alt="OC Client" src="../img/field_oc_k8s.png" /></p>
<p>The pod client for the security and monitoring update operation must be 
supplied as part of the Db2 Shift command. Only one of the following 
clients must be used:</p>
<ul>
<li><code>--oc</code> OpenShift Destination</li>
<li><code>--kubectl</code> Kubernetes Destination</li>
</ul>
<p>If the client is Kubernetes (<code>--kubectl</code>) or OpenShift (<code>--oc</code>), 
the program requires that the appropriate <code>kubectl</code> or <code>oc</code> client 
has been installed locally and that the namespace or project has already been specified.</p>
<h2 id="source-or-instance-owner">Source or Instance Owner</h2>
<p>Syntax: <code>--source-owner="instance name"</code>
<img alt="Source Owner" src="../img/field_source_owner.png" /></p>
<p>The Db2 Shift program will double check that the instance owner matches that of the 
target system when applying the LDAP and DMC settings.</p>
<h2 id="destination-database">Destination Database</h2>
<p>Syntax: <code>--dest-database=""</code>
<img alt="Target Database" src="../img/field_source_database.png" /></p>
<p>The destination database must be supplied so that the updates to the security settings
and Data Management Console control tables can be properly inserted.</p>
<h2 id="destination-server-pod">Destination Server (POD)</h2>
<p>Syntax: <code>--dest-server="pod_name"</code>
<img alt="Target Server" src="../img/field_pod_name.png" /></p>
<p>For deployments to OpenShift, Kubernetes, or CP4D, you must supply the name
of the POD that Db2U is running in. The OpenShift or Kubernetes client should
be used to connect to the target namespace or project before issuing the 
Db2 Shift command. </p>
<h2 id="destination-pod-namespace-or-project">Destination Pod Namespace or Project</h2>
<p>Syntax: <code>--dest-namespace=""</code>, <code>--dest-project=""</code>
<img alt="Namespace" src="../img/field_namespace.png" /></p>
<p>In Kubernetes deployments, the location of a pod is associated with 
a namespace, while in OpenShift deployments, the pod is associated with
a project.</p>
<p>When authenticating to a Kubernetes or OpenShift environment, it is 
recommended that the local client be connected to the project or 
namespace that the Db2U pod is running in. </p>
<p>If you do not supply a namespace or project value, the Db2 Shift program
will assume that you are already connected to that project. If this is not
the case, the program will stop with an error when it attempts to find the 
pod. </p>
<p>To have Db2 Shift connect to the appropriate project or namespace, 
supply the value of the namespace or project using this option.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../hadrinstance/" class="btn btn-neutral float-left" title="HADR Setup Instance to Instance"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../clonecopy/" class="btn btn-neutral float-right" title="Clone Copying">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../hadrinstance/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../clonecopy/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
