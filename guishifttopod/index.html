
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>UI - Shift a Db2 database to OpenShift, Kubernetes or CP4D - Db2 Click to Containerize</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ui-shift-a-db2-database-to-openshift-kubernetes-or-cp4d" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Db2 Click to Containerize" class="md-header__button md-logo" aria-label="Db2 Click to Containerize" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Db2 Click to Containerize
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              UI - Shift a Db2 database to OpenShift, Kubernetes or CP4D
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Db2 Click to Containerize" class="md-nav__button md-logo" aria-label="Db2 Click to Containerize" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Db2 Click to Containerize
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../prerequisites/" class="md-nav__link">
        Pre-Requisites
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../gui/" class="md-nav__link">
        User Interface Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Command Line
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command Line" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Command Line
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../syntax/" class="md-nav__link">
        Db2 Shift Syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Options Reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Shift Scenarios
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Shift Scenarios" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Shift Scenarios
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scenarios/" class="md-nav__link">
        Scenario Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shiftpod/" class="md-nav__link">
        Db2 Shift to Pod
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shiftinstance/" class="md-nav__link">
        Db2 Shift to Instance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clone/" class="md-nav__link">
        Clone a Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploypod/" class="md-nav__link">
        Deploy a Clone to a Pod
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployinstance/" class="md-nav__link">
        Deploy a Clone to an Instance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hadrpod/" class="md-nav__link">
        HADR Setup Instance to Pod
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hadrinstance/" class="md-nav__link">
        HADR Setup Instance to Instance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ldapdmc/" class="md-nav__link">
        LDAP and DMC Initialization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clonecopy/" class="md-nav__link">
        Clone Copying
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bestpractices/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Options Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        Support
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../disclaimer/" class="md-nav__link">
        Disclaimer
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-database" class="md-nav__link">
    Source Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-or-instance-owner" class="md-nav__link">
    Source or Instance Owner
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-client-instance-to-pod" class="md-nav__link">
    Target Client (Instance to POD)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#destination-database" class="md-nav__link">
    Destination Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#destination-pod-namespace-or-project" class="md-nav__link">
    Destination Pod Namespace or Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#destination-server-pod" class="md-nav__link">
    Destination Server (POD)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synchronization-options" class="md-nav__link">
    Synchronization Options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-generation" class="md-nav__link">
    Metadata Generation
  </a>
  
    <nav class="md-nav" aria-label="Metadata Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#refresh" class="md-nav__link">
    Refresh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-settings" class="md-nav__link">
    Generate Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verification" class="md-nav__link">
    Verification
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#move-option" class="md-nav__link">
    Move Option
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stored-procedures-and-functions" class="md-nav__link">
    Stored Procedures and Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#online-or-offline-move" class="md-nav__link">
    Online or Offline Move
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-threading" class="md-nav__link">
    Performance: Threading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-compression" class="md-nav__link">
    Performance: Compression
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="ui-shift-a-db2-database-to-openshift-kubernetes-or-cp4d">UI - Shift a Db2 database to OpenShift, Kubernetes or CP4D</h1>
<p><img alt="ShiftPOD" src="../img/c2c_shift_pod.png" /></p>
<p>Containerizing an existing Db2 database on an on-premise system to OpenShift, Kubernetes, or CP4D 
is the most common scenario for using Db2 Shift. In order to move a Db2 database to a POD you 
will require the following information:</p>
<ul>
<li>Source Database details</li>
<li>Destination location</li>
<li>Type of Containerization environment</li>
<li>Shift Options</li>
</ul>
<p>The target of the Db2 Shift operation can be OpenShift, a Kubernetes cluster, or Cloud Pak for Data system. </p>
<h2 id="source-database">Source Database</h2>
<p><img alt="Source Database" src="../img/field_source_database.png" /></p>
<p>The source database is the name of the database that you want to move to
the new location. Note that you can have the same or different database
name at the target. If you provide a different database name at the target,
the program will copy the database from the source and place it on the
target and use the existing name.</p>
<p><strong>Alert!</strong>
</br>
If you are shifting a database to Cloud Pak for Data, and your INSTANCE userid is <strong>not</strong> db2inst1, you 
must execute the following SQL commands from a userid that has SECADM authority:</p>
<pre><code>GRANT SECADM ON DATABASE TO db2inst1
GRANT DBADM  ON DATABASE TO db2inst1 
</code></pre>
<p>The <code>db2inst1</code> userid does not need to exist in the Operating system in order to grant these privileges to the userid. This
requirement does not apply to other Db2 Shift environments. If <code>db2inst1</code> is not defined as a <code>SECADM</code> and <code>DBADM</code> user in the
database, the Data Management Console feature of CP4D will not be able to access the database nor will it be able to monitor it.</p>
<h2 id="source-or-instance-owner">Source or Instance Owner</h2>
<p><img alt="Source Owner" src="../img/field_source_owner.png" /></p>
<p>The Db2 Shift program makes the assumption that the current userid you are logged into
is the owner of the instance. This is necessary due to the requirement
to access the underlying files that are used by Db2. If you supply the 
source owner value, Db2 Shift will double check that you are working in the correct
instance and the settings files are consistent.</p>
<h2 id="target-client-instance-to-pod">Target Client (Instance to POD)</h2>
<p><img alt="OC Client" src="../img/field_oc_k8s.png" /></p>
<p>The pod client for a deploy (clone) operation must be 
supplied as part of the Db2 Shift command. If the client is Kubernetes or OpenShift,
the program requires that the appropriate <code>kubectl</code> or <code>oc</code> client 
has been installed locally and that the namespace or project has already been specified.</p>
<h2 id="destination-database">Destination Database</h2>
<p><img alt="Target Database" src="../img/field_source_database.png" /></p>
<p>The destination database name can be the same as the source database, or 
a completely different name. Make sure that if you are creating a database
with a different name that it doesn't currently exist on your target system.
Otherwise, the target database will be deleted!</p>
<h2 id="destination-pod-namespace-or-project">Destination Pod Namespace or Project</h2>
<p><img alt="Namespace" src="../img/field_namespace.png" /></p>
<p>In Kubernetes deployments, the location of a pod is associated with 
a namespace, while in OpenShift deployments, the pod is associated with
a project.</p>
<p>When authenticating to a Kubernetes or OpenShift environment, it is 
recommended that the local client be connected to the project or 
namespace that the Db2U pod is running in. </p>
<p>If you do not supply a namespace or project value, the Db2 Shift program
will assume that you are already connected to that project. If this is not
the case, the program will stop with an error when it attempts to find the 
pod. </p>
<p>To have Db2 Shift connect to the appropriate project or namespace, 
supply the value of the namespace or project using this option.</p>
<h2 id="destination-server-pod">Destination Server (POD)</h2>
<p><img alt="Target Server" src="../img/field_pod_name.png" /></p>
<p>For deployments to OpenShift, Kubernetes, or CP4D, you must supply the name
of the POD that Db2U is running in. The OpenShift or Kubernetes client should
be used to connect to the target namespace or project before issuing the 
Db2 Shift command.      </p>
<h2 id="synchronization-options">Synchronization Options</h2>
<p><img alt="Sync Options" src="../img/field_sync.png" /></p>
<p>The Db2 Shift program has two methods of moving the database to the
destination. The traditional method is to take one pass at the database
and move everything at once. During the finishing process, the program
will briefly suspend the database (depending on settings) and perform
a final refresh. This last step will pick up any database objects that 
may have changed over the course of the move.</p>
<p>The total amount of time the database is suspended is directly related
to how much information has changed during the shift process. In the 
event that you have large amount of changes, the final refresh may
too long an outage. To minimize this outage, you can use the 
synchronization options provided.</p>
<p>The default setting is do a complete shift operation without intermediate sync operations.</p>
<p>To initialize the synchronization option, select <code>Initialize</code> from the option list.</p>
<p><img alt="Sync Options" src="../img/field_sync_init.png" /></p>
<p>This initial step will instruct Db2 Shift to copy all of the 
required database objects to the target system. Once the copies are 
complete, the program will end processing and leave the target
system in an incomplete state. During this process the source
database is operational and it will <strong>not be suspended</strong>. </p>
<p>When there is an appropriate moment, the database movement can 
be finalized with the <code>Finalize</code> option.</p>
<p><img alt="Sync Options" src="../img/field_sync_finalize.png" /></p>
<p>The <code>Finalize</code> option will do one final pass against the source
database and then it will finalize the database movement on the 
destination site. During the last pass the finish process will
<code>suspend</code> the database to get a consistent database environment.
Once this step completes, the destination database will be 
available.</p>
<p>In the event that the source system has high update volumes, there
may be a need to do multiple sync operations to minimize the
finalize step. The Db2 Shift command will need to be told
that it is syncing the database again, but not to start from 
scratch. The control files generated by the <code>Initialize</code> option
will allow Db2 Shift to move database objects that are new
or have changed since the initial synchronization request. The 
command to do the sync and only refresh the database objects
requires the use of the <code>Refresh</code> option.</p>
<p><img alt="Sync Options" src="../img/field_sync_refresh.png" /></p>
<p>The <code>Refresh</code> option indicates to the Db2 Shift program to
start syncing process to look for delta changes only.</p>
<p>The <code>Refresh</code> process can be run repeatedly until
the amount of changes between runs is minimized. When an appropriate
timeslot is available, the shift can be finalized by using the
<code>Finalize</code> option.</p>
<p><img alt="Sync Options" src="../img/field_sync_finalize.png" /></p>
<p>The <code>Finalize</code> option will perform the final pass against the source
database and complete the shift process as before.</p>
<p>In summary, the standard shift operation will complete in one step (<code>None</code>
option is used). The <code>Initialize</code> option allows you 
to gradually move a database over time. For a gradual
database shift, use the <code>Initialize</code> option on the first run. This will move
an initial set of database files to the target. Then use the <code>Refresh</code> option
on subsequent runs to copy any files that may have been added or changed to
the database. When you are ready to finalize the shift, use the <code>Finalize</code>
option to gather any remaining files and complete the shift operation on
the target system.</p>
<h2 id="metadata-generation">Metadata Generation</h2>
<p><img alt="Meta Data" src="../img/field_metadata.png" /></p>
<p>The Db2 Shift command generates metadata that is used during the shift process. This metadata is key to determining which
objects need to be moved from a source to destination as well as validating that the source can be successfully moved.</p>
<p>Generating metadata requires access to the source and destination systems. If for some reason the connection to the 
source or destination is unavailable, the existing metadata files can still be used. In most cases you will not need to 
adjust these settings unless you have encountered a shift error.</p>
<h3 id="refresh">Refresh</h3>
<p><img alt="Meta Data" src="../img/field_metadata.png" /></p>
<p>The <code>Refresh</code> option determines whether or not the existing metadata is refreshed. The default is value 
for the Meta Data field is <code>Refresh</code>. The <code>Refresh</code> option will 
delete any existing metadata files and recreate them on your system during the shift operation. </p>
<p>If you are importing settings files from other systems, or if you need to rerun the shift process without regenerating the files, use the <code>None</code> option. When Db2 Shift executes it will use the existing metadata in the working directory and 
attempt to use those settings. </p>
<p><img alt="Meta Data" src="../img/field_no_metadata.png" /></p>
<p>One scenario that involves the use of <code>None</code> occurs when a shift operation fails at the target OC/Kubernetes pod
because of a communication error. The database at the destination will be left in an inconsistent state and must be rebuilt
by the shift process. The settings for the destination database can no longer be retrieved because the database cannot be 
started. Because of this reason, you must use the existing destination settings that were generated when you first ran the
Db2 Shift command.</p>
<h3 id="generate-settings">Generate Settings</h3>
<p><img alt="Meta Data" src="../img/field_settings_only.png" /></p>
<p>The <code>Settings Only</code> option will generate the meta files but will prevent Db2 Shift from continuing execution after the metadata files have been created. </p>
<h3 id="verification">Verification</h3>
<p><img alt="Meta Data" src="../img/field_verify.png" /></p>
<p>The <code>Verify</code> option will generate the metadata files and check the connectivity and all settings and then stop
execution. If <code>Verify</code> completes successfully, the Db2 Shift command will be able to execute the shift process.</p>
<h2 id="move-option">Move Option</h2>
<p>The move option determines what steps the Db2 Shift program will take to 
move your database to the new location. The following are the values that
move can have.</p>
<p><img alt="Mode" src="../img/field_move_db.png" /></p>
<p>The <code>Database</code> option will take a copy of your Db2 database and copy it into the
target Db2U container or instance. No other processing is done with the database.</p>
<p><img alt="Mode" src="../img/field_move_all.png" /></p>
<p>If you choose the <code>Database/LDAP/DMC</code> option, the database will be moved and the program
will also apply any security and console settings that are required.
The ALL option is necessary in CP4D environments where the
LDAP settings need to be updated and the DMC console needs to be reset to
recognize the new database.</p>
<p><img alt="Mode" src="../img/field_move_hadr.png" /></p>
<p>When <code>Move Database for HADR</code> mode is selected, the database will be copied over to the target location
and initialized as an HADR secondary. 
The database can now be connected with the primary database as an HADR pair and participate in failover or readonly applications. </p>
<p>This option cannot be used if your database needs to be migrated or if the database needs to be renamed. </p>
<h2 id="stored-procedures-and-functions">Stored Procedures and Functions</h2>
<p><img alt="Threading" src="../img/field_routines.png" /></p>
<p>By default, the Db2 Shift command will automatically move all external stored procedures and functions 
that are found in the <code>$HOME/sqllib/function</code> path to the new destination. All SQLPL and PL/SQL routines 
are moved as part of the database move, so there is no migration required for those routines. </p>
<p>Select this option to prevent any external functions being moved to the destination.</p>
<h2 id="online-or-offline-move">Online or Offline Move</h2>
<p><img alt="Online" src="../img/field_online.png" /></p>
<p>By default, the Db2 Shift command will suspend the database while it completes the last scan of the files. During this
period of time, the database will not complete any insert, update, or delete transactions. This will result in a consistent
database at the destination, but some transactions will not have been committed to the database. If the database
at the destination must be identical to the source database, then you must choose the <code>Offline Move</code> option which
will shut down the database so there will not be any transactions outstanding when the shift is completed. </p>
<p>Note: The period of time that the database is suspended or stopped is dependent on the changes that have occurred in the
database from the time the shift operation started to the time when copying of the data is complete. The 
changes that have occurred during this period of time needs to be captured during the final step. It is during this
step that the database must be suspended or stopped. During the initial scan the database will remain completely online 
and will not be impacted by the shift utility from a transaction perspective. However, since there is a large amount of
disk reads taking place, it may impact bufferpool read performance.</p>
<p>The <code>Offline Move</code> mode must be used when shifting a database that requires a migration from an older release of 
Db2. This option must be specified when shifting Db2 versions 10.5 or 11.1.  </p>
<h2 id="performance-threading">Performance: Threading</h2>
<p><img alt="Threading" src="../img/field_threads.png" /></p>
<p>The copy phase of the Db2 Shift program is able to use multiple threads to transmit data to a destination. 
This settings allows you to increase
the parallelism up to 8 threads. As you increase the number of threads, the amount of data being transmitted
increases, at the expense of greater CPU usage and network congestion. The default value is 4 which strikes a balance between
overhead and network performance.</p>
<h2 id="performance-compression">Performance: Compression</h2>
<p><img alt="Threading" src="../img/field_compression.png" /></p>
<p>RSYNC compresses the data during the transfer process to allow for faster
movement of data. The amount of compression can be adjusted from 0 to 9
with 0 turning off compression and values between 1 and 9 increasing the
amount of compression applied to the data. Higher compression values will
result in more CPU usage and may not significantly reduce the size of the
datastream. </p>
<p>A value of 4 has been found to be a good compromise between 
compression overhead and data size. For slow networks, 
a higher value may reduce transmission times at the expense of increased CPU overhead.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>